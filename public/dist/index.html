<!DOCTYPE html>
<html>
<head>

    <title>777</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.js" ></script>
    <script src="js/core/vue-material.debug.js"></script>
    <script src="js/core/jquery.cookie.js"></script>
    <link rel="stylesheet" href="css/core/vue-material.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>

    <link rel='stylesheet' href='./css/default.css' />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">

    <style>
        *:not(input):not(textarea) {
            -webkit-user-select: none; /* disable selection/Copy of UIWebView */
            -webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
        }
    </style>
</head>
<body  >
<div id="app">

    <div class="contentView">

        <div class="intro" style="" v-if="pageState == 'intro'">
            <div class="outer">
                <div class="inner">
                    <div class="row">
                        <div class="col-xs-8 col-xs-offset-2">
                            <md-input-container>
                                <label>아이디를 입력하세요.</label>
                                <md-input class="eventObj userId" ></md-input>
                            </md-input-container>
                        </div>
                        <div class="col-xs-8 col-xs-offset-2">
                            <md-input-container md-has-password>
                                <label>패드워드를 입력해주세요.</label>
                                <md-input type="password" class="eventObj userPassword"></md-input>
                            </md-input-container>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4 col-xs-offset-2">
                            <md-button class="md-raised md-primary eventObj" onclick="login();">로그인</md-button>
                        </div>
                        <div class="col-xs-4">
                            <md-button class="md-raised md-primary eventObj eventEnd" onclick="changeView('join');">회원가입</md-button>
                        </div>
                    </div>
                    <div class="row">

                    </div>
                </div>
            </div>
        </div>

        <div class="join" style="" v-if="pageState == 'join'">
            <div class="outer">
                <div class="inner">
                    <md-stepper>
                        <md-step md-button-continue="다음" md-button-back="이전">
                            <md-input-container>
                                <label>아이디를 입력하세요.</label>
                                <md-input class="eventObj userId" ></md-input>
                            </md-input-container>
                            <md-input-container>
                                <label>닉네임을 입력하세요.</label>
                                <md-input class="eventObj userNickName" ></md-input>
                            </md-input-container>
                        </md-step>
                        <md-step md-button-continue="가입" md-button-back="이전">
                            <md-input-container md-has-password>
                                <label>패드워드를 입력해주세요.</label>
                                <md-input type="password" class="eventObj userPassword"></md-input>
                            </md-input-container>

                            <md-input-container md-has-password>
                                <label>패스워드를 한번 더 입력해주세요.</label>
                                <md-input type="password" class="eventObj userPassword2"></md-input>
                            </md-input-container>
                        </md-step>
                    </md-stepper>
                </div>
            </div>
        </div>

        <div class="gameStart" style="" v-if="pageState == 'game'">
            <div class="outer">
                <div class="inner">
                    <md-button class="md-raised md-primary eventObj eventEnd" onclick="gameStart();">게임시작</md-button>
                </div>
            </div>

        </div>

        <div class="game" v-if="pageState == 'gameStart'">
            <div class="time">time : {{gamePlayInfo.time}}</div>
            <div class="combo">combo : {{gamePlayInfo.combo}}</div>
            <div class="gamePannel">
                <div class="row" v-for="(buttonRow, rowIndex) in buttons" v-bind:class="'rowIndex-' + rowIndex">
                    <div class="col-md-3 col-xs-3 gameButton eventObj" v-bind:class="[button.styleClass,' buttonIndex-' + i, button.state, button.color] " v-for="(button, i) in buttonRow"
                         v-on:click="buttonClick(rowIndex,i)" >
                        <div class="outer">
                            <div class="inner text" >{{button.text}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="score eventObj " onclick="autoPlay();">{{gamePlayInfo.score}}</div>
        </div>

        <div class="gameEnd" style="" v-if="pageState == 'gameEnd'">
            <div class="time">combo : {{gamePlayInfo.combo}}</div>
            <div class="combo">score : {{gamePlayInfo.score}}</div>
            <div class="combo">bonus : {{gamePlayInfo.bonus}}</div>
            <div class="combo">exe : {{gamePlayInfo.exe}}</div>
            <div class="combo">level : {{gamePlayInfo.level}}</div>
            <div class="outer">
                <div class="inner">
                    <button type="button" onclick="changeView('rank');" class="md-button md-primary md-raised eventObj eventEnd md-theme-default">rank<div class="md-ink-ripple"><div class="md-ripple" style="width: 0px; height: 0px;"></div></div></button>
                </div>
            </div>
        </div>

        <div class="rank" v-if="pageState == 'rank'">
            <md-table >
                <md-table-header>
                    <md-table-row>
                        <md-table-head></md-table-head>
                        <md-table-head>userName</md-table-head>
                        <md-table-head md-numeric>Score</md-table-head>
                        <md-table-head md-numeric>level</md-table-head>
                    </md-table-row>
                </md-table-header>

                <md-table-body>
                    <md-table-row v-for="(currentUser, index) in usersRank">
                        <md-table-cell>{{index+1}}</md-table-cell>
                        <md-table-cell>{{currentUser.info.nickName}}</md-table-cell>
                        <md-table-cell md-numeric>{{currentUser.info.score}}</md-table-cell>
                        <md-table-cell md-numeric>{{currentUser.info.level}}</md-table-cell>
                    </md-table-row>
                </md-table-body>
            </md-table>
        </div>
    </div>
    <div class="phone-viewport" v-if="pageState != 'intro' && pageState != 'wait' ">
        <md-bottom-bar md-theme="teal" class="bottomNav">
            <!--<md-bottom-bar-item md-icon="history" onclick="changeView('main');" class="eventObj eventEnd">main</md-bottom-bar-item>-->
            <md-bottom-bar-item md-icon="favorite" md-active onclick="changeView('game');" class="eventObj eventEnd">game</md-bottom-bar-item>
            <md-bottom-bar-item md-icon="near_me" onclick="changeView('rank');" class="eventObj eventEnd">rank</md-bottom-bar-item>
            <!--<md-bottom-bar-item md-icon="history" onclick="changeView('setting');" class="eventObj eventEnd">setting</md-bottom-bar-item>-->
        </md-bottom-bar>
    </div>
    <!-- use the modal component, pass in the prop -->
    <modal v-show="showModal == true" @close="showModal = false" />
    <h3 slot="header">점수 저장</h3>
    <script type="text/x-template" id="modal-template">
        <transition name="modal">
            <div class="modal-mask">
                <div class="modal-wrapper">
                    <div class="modal-container">

                        <div class="modal-header">
                            <slot name="header">
                                default header
                            </slot>
                        </div>

                        <div class="modal-body">
                            <slot name="body">
                                <div class="md-input-container md-theme-default" v-bind:class="focusClass">
                                    <label>유저 이름을 입력하세요.</label>
                                    <input type="text" class="md-input eventObj userNameInput" v-on:focus="focus();" v-on:blur="blur();">
                                </div>
                            </slot>
                        </div>

                        <div class="modal-footer">
                            <slot name="footer">
                                <button type="button" class="md-button md-primary md-raised eventEnd md-theme-default" @click=" $emit('close') " onclick="scoreSave();"> 저장<div class="md-ink-ripple"><div class="md-ripple md-fadeout md-active" style="width: 80px; height: 80px; top: -36px; left: -11.3125px;"></div></div></button>
                                <button type="button" class="md-button md-primary md-raised eventEnd md-theme-default" @click=" $emit('close') "> 닫기<div class="md-ink-ripple"><div class="md-ripple" style="width: 0px; height: 0px;"></div></div></button>
                            </slot>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </script>
</div>
<script src="./js/script.js"></script>
</body>
</html>
